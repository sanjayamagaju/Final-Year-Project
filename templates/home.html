{% extends 'navigation.html' %}
{% load static %}

{% block title %}
Life Savior
{% endblock title %}



{% block content %}
<link rel="stylesheet" type="text/CSS" href="{% static './CSS/home.css' %}">


<!-- front sliding image -->
<div class="container cont">
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
        aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static './Images/front.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static './Images/front.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static './Images/front.jpg' %}" class="d-block w-100" alt="...">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="centered">*Your little help can save someone's precious Life*</div>
  <a href="{% url 'campaign' %}"><h1 class="centered2">Start Your Donation</h1></a>
</div>

<br><br>

<!-- Trending campaigns -->
<h2 class="Tre_camp">Trending Campaigns</h2>
<br>


<div class="row" style="margin-left: 10px;">
  {% for campaign in campaigns %}
  <div class="card" style="width: 31%; margin: 0.7%; background-color: rgba(220, 227, 230, 0.856);">
    <img src="{% if campaign.Image %}
                {{campaign.Image.url}}
                {% else %}
                {% static './Images/blank.jpg' %}
                {% endif %}" alt="img" class="image_camp">
    <div class="card-body">
      <div class="text_camp">Name: {{campaign.Name}}</div>
      <div class="text_camp">Target: {{campaign.Target}}</div>
      <div class="text_camp">Collected: {{campaign.Collected}}</div>
      <div class="text_camp">Info: {{campaign.Info}}</div>
      <div class="text_camp">Date_Added: {{campaign.Date_added}}</div>
      <br>
      <div class="progress">
        <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <div class="progress_text">Rs. {{ campaign.Collected }} - Done</div>
      <br>
      <br>
      <a href="{% url 'khaltirequest_camp' campaign.id %}" class="btn btn-primary">Donate</a>
    </div>
  </div>

  <script>
    var pro_bar = document.querySelectorAll(".progress-bar");
    for (var i = 0; pro_bar[i]; i++) {
      var pro_bars = pro_bar[i];
      var progpercent = {{ campaign.Collected }} / {{campaign.Target}};
    }
    pro_bars.style.width = `${progpercent * 100}%`;
  </script>
  {% endfor %}
</div>


{% endblock content %}