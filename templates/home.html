{% extends 'navigation.html' %}
{% load static %}

{% block title %}
Life Savior
{% endblock title %}



{% block content %}
<link rel="stylesheet" type="text/CSS" href="{% static './CSS/home.css' %}">


<!-- front sliding image -->
<div class="container cont">
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
        aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static './Images/front.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static './Images/front1.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static './Images/front2.png' %}" class="d-block w-100" alt="...">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
      data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="centered">*Your little help can save someone's precious Life*</div>
  <a href="{% url 'campaign' %}">
    <h1 class="centered2">Start Your Donation</h1>
  </a>
</div>

<br><br>

<!-- Trending campaigns -->
<h2 class="Tre_camp">Trending Campaigns</h2>
<hr>

<div class="row" style="margin-left: 10px;">
  {% for trending in trendings %}
  <div class="card" style="width: 31%; margin: 0.7%; background-color: rgba(220, 227, 230, 0.856);">
    <img src="{% if trending.Image %}
                {{trending.Image.url}}
                {% else %}
                {% static './Images/blank.jpg' %}
                {% endif %}" alt="img" class="image_camp">
    <div class="card-body">
      <div class="text_camp"><a href="{% url 'detail' trending.id %}" class="victim"><b>Victim:
            {{trending.Name}}</b></a></div>
      <div class="text_camp">Target: {{trending.Target}}</div>
      <div class="text_camp">Collected: {{trending.Collected}}</div>
      <br>
      {% comment %} <div class="text_camp">Info: {{trending.Info}}</div> {% endcomment %}
      <div class="progress">
        <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0"
          aria-valuemax="100"></div>
      </div>
      <div class="progress_text">Rs. {{ trending.Collected }} - Done</div>
      <br>
      <a href="{% url 'khaltirequest' trending.id %}"><button type="button"
          class="btn btn-success dontate-khalti">Donate</button></a>
      <br>
      <br>
      <div class="text_camp">Date_Added: {{trending.Date_added}}</div>
    </div>
  </div>

  <script>
    var pro_bar = document.querySelectorAll(".progress-bar");
    for (var i = 0; pro_bar[i]; i++) {
      var pro_bars = pro_bar[i];
      var progpercent = {{ trending.Collected }} / {{trending.Target}};
    }
    pro_bars.style.width = `${progpercent * 100}%`;
  </script>
  {% endfor %}
</div>

<!-- leaderboard -->
<br>
<br>
<h2 class="Tre_camp">Top Donors</h2>
<hr>
{% for lbd in leaderboards %}
<div class="card text-center recent-act">
  <div class="card-header">
    <b> Donor: {{lbd.donor}}</b>
  </div>
  <div class="card-body">
    <p class="card-title">Donated To: {{lbd.camp_detail}}</p>
    <p class="card-text">Donated Amount: {{lbd.donation_amt}} Paisa</p>
  </div>
  <div class="card-footer text-muted">
    Date of Donation: {{lbd.date_donation}}
  </div>
</div><hr>
{% endfor %}


{% endblock content %}